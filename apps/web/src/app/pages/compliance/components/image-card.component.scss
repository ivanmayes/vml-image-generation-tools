.compliance-card {
	background: var(--p-surface-0);
	border: 1px solid var(--p-surface-200);
	border-radius: 0.5rem;
	overflow: hidden;
	animation: fadeSlideIn 0.2s ease both;
	transition:
		transform 0.2s ease,
		box-shadow 0.2s ease,
		border-color 0.2s;

	&--clickable {
		cursor: pointer;

		&:hover {
			transform: translateY(-0.125rem);
			box-shadow: 0 0.5rem 1.5rem var(--p-surface-200);
			border-color: var(--p-surface-300);

			.compliance-card__hover-overlay {
				opacity: 1;
			}
		}
	}

	&--pass {
		border-bottom: 2px solid var(--compliance-pass);
	}

	&--warn {
		border-bottom: 2px solid var(--compliance-warn);
	}

	&--fail {
		border-bottom: 2px solid var(--compliance-fail);
	}
}

.compliance-card__image {
	position: relative;
	aspect-ratio: 1;
	background: var(--p-surface-100);
	overflow: hidden;

	img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}
}

.compliance-card__placeholder {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--p-surface-400);
	font-size: 2rem;
}

.compliance-card__status {
	position: absolute;
	top: 0.5rem;
	left: 0.5rem;
	display: flex;
	align-items: center;
	gap: 0.375rem;
	padding: 0.25rem 0.625rem;
	border-radius: 0.25rem;
	font-size: 0.6875rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	backdrop-filter: blur(0.5rem);
	z-index: 2;

	&--uploading {
		background: var(--p-overlay-modal-background);
		color: var(--p-surface-0);
	}

	&--queued {
		background: var(--p-overlay-modal-background);
		color: var(--p-surface-300);
	}

	&--evaluating {
		background: var(--p-primary-color);
		color: var(--p-primary-contrast-color);
		animation: status-pulse 2s ease-in-out infinite;
	}

	&--failed {
		background: var(--p-red-700);
		color: var(--p-surface-0);
	}
}

.compliance-card__progress {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 0.1875rem;
	background: var(--p-surface-300);
	z-index: 2;
}

.compliance-card__progress-fill {
	height: 100%;
	background: var(--p-primary-400);

	&--indeterminate {
		width: 40%;
		animation: indeterminate-progress 1.5s ease-in-out infinite;
	}
}

.compliance-card__remove {
	position: absolute;
	top: 0.5rem;
	right: 0.5rem;
	width: 1.75rem;
	height: 1.75rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: none;
	border-radius: 50%;
	background: var(--p-overlay-modal-background);
	color: var(--p-surface-0);
	cursor: pointer;
	z-index: 3;
	font-size: 0.75rem;

	&:hover {
		background: var(--p-red-600);
	}
}

.compliance-card__hover-overlay {
	position: absolute;
	inset: 0;
	background: var(--p-overlay-modal-background);
	display: flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	transition: opacity 0.2s;
	z-index: 1;

	.compliance-card__action-hint {
		padding: 0.375rem 1rem;
		border-radius: 0.25rem;
		background: var(--p-surface-0);
		color: var(--p-text-color);
		font-size: 0.8125rem;
		font-weight: 500;
	}
}

.compliance-card__footer {
	display: flex;
	align-items: center;
	gap: 0.625rem;
	padding: 0.625rem 0.75rem;
	min-height: 2.75rem;

	&__score {
		font-family: "Roboto Mono", monospace;
		font-size: 0.9375rem;
		font-weight: 500;
		font-variant-numeric: tabular-nums;
		min-width: 1.75rem;

		&--success {
			color: var(--compliance-pass);
		}

		&--warn {
			color: var(--compliance-warn);
		}

		&--danger {
			color: var(--compliance-fail);
		}
	}

	&__label {
		font-size: 0.75rem;
		color: var(--p-text-muted-color);
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		flex: 1;
	}

	&__error {
		font-size: 0.75rem;
		color: var(--compliance-fail);
		flex: 1;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
}

.compliance-card__retry-btn {
	display: flex;
	align-items: center;
	gap: 0.25rem;
	padding: 0.25rem 0.625rem;
	border: 1px solid var(--p-surface-300);
	border-radius: 0.25rem;
	background: transparent;
	color: var(--p-text-color);
	font-size: 0.6875rem;
	font-weight: 600;
	cursor: pointer;
	transition: background 0.2s;
	white-space: nowrap;

	&:hover {
		background: var(--p-surface-100);
	}
}

@keyframes status-pulse {
	0%,
	100% {
		opacity: 1;
	}

	50% {
		opacity: 0.7;
	}
}

@keyframes indeterminate-progress {
	0% {
		transform: translateX(-100%);
	}

	100% {
		transform: translateX(350%);
	}
}
