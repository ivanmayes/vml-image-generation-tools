@if (judgeName) {
	<h4 class="judge-name">{{ judgeName }}</h4>
}

<div class="results-container">
	<!-- Score Display -->
	<div class="score-display">
		<span class="score-value">{{ result.overallScore }}</span>
		<p-tag
			[value]="
				result.overallScore >= 80
					? 'Good'
					: result.overallScore >= 60
						? 'Fair'
						: 'Poor'
			"
			[severity]="getScoreSeverity(result.overallScore)"
		></p-tag>
	</div>

	<!-- Top Issue -->
	@if (result.topIssue) {
		<div class="top-issue-card">
			<div class="top-issue-header">
				<strong>Top Issue</strong>
				<p-tag
					[value]="result.topIssue.severity"
					[severity]="getSeverityColor(result.topIssue.severity)"
				></p-tag>
			</div>
			<p class="top-issue-problem">{{ result.topIssue.problem }}</p>
			<p class="top-issue-fix">
				<strong>Fix:</strong> {{ result.topIssue.fix }}
			</p>
		</div>
	}

	<!-- Category Scores -->
	@if (getCategoryScoreEntries().length > 0) {
		<div class="section">
			<h4>Category Scores</h4>
			@for (entry of getCategoryScoreEntries(); track entry[0]) {
				<div class="category-score-item">
					<span class="category-label">{{ entry[0] }}</span>
					<div class="category-bar">
						<p-progressBar
							[value]="entry[1]"
							[showValue]="true"
						></p-progressBar>
					</div>
				</div>
			}
		</div>
	}

	<!-- What Worked -->
	@if (result.whatWorked && result.whatWorked.length > 0) {
		<div class="section">
			<h4>What Worked</h4>
			<ul class="what-worked-list">
				@for (item of result.whatWorked; track item) {
					<li>{{ item }}</li>
				}
			</ul>
		</div>
	}

	<!-- Checklist -->
	@if (getChecklistEntries().length > 0) {
		<div class="section">
			<h4>Checklist</h4>
			@for (entry of getChecklistEntries(); track entry[0]) {
				<div class="checklist-item">
					@if (entry[1].passed) {
						<i
							class="pi pi-check-circle"
							style="color: var(--p-green-500)"
						></i>
					} @else {
						<i
							class="pi pi-times-circle"
							style="color: var(--p-red-500)"
						></i>
					}
					<span class="checklist-label">{{ entry[0] }}</span>
					@if (entry[1].note) {
						<span class="checklist-note">{{ entry[1].note }}</span>
					}
				</div>
			}
		</div>
	}

	<!-- Feedback -->
	@if (result.feedback) {
		<div class="section">
			<h4>Feedback</h4>
			<div class="feedback-block">{{ result.feedback }}</div>
		</div>
	}
</div>
